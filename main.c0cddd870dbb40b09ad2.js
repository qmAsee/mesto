(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible",errorClassHidden:"popup__error"},r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._validationConfig=e,this._formElement=n,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._errorClassHidden=e.errorClassHidden,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var n,r;return n=t,(r=[{key:"_showInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));e.classList.remove(this._errorClassHidden),e.classList.add(this._errorClass),e.textContent=t.validationMessage,t.classList.add(this._inputErrorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));e.classList.add(this._errorClassHidden),e.classList.remove(this._errorClass),e.textContent=" ",t.classList.remove(this._inputErrorClass)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.remove(this._submitButtonSelector),this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.add(this._submitButtonSelector),this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"resetValidation",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){t._hideInputError(e)}))}},{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"disableSubmitButton",value:function(){this._toggleButtonState()}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}var u=function(){function t(e,n,r,o,i,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._templateSelector=n,this._userId=u,this._ownerId=e.owner._id,this._cardId=e._id,this._likes=e.likes,this._isLiked=!1,this._handleClickLike=i,this._handleDeleteCard=o,this._openPopupImage=r}var e,n;return e=t,(n=[{key:"_createTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}},{key:"isCardLiked",get:function(){return this._isLiked}},{key:"toggleIsLiked",value:function(){this._isLiked=!this._isLiked}},{key:"setLikes",value:function(t){this._likes=t,this._numLikes.textContent=this._likes.length,this._elementLike.classList.toggle("card__like_active")}},{key:"removeCard",value:function(){this._element.remove(),this._element=null}},{key:"generateCard",value:function(){var t=this;return this._element=this._createTemplate(),this._elementLike=this._element.querySelector(".card__like"),this._elementTrash=this._element.querySelector(".card__trash"),this._elementImg=this._element.querySelector(".card__image"),this._elementTitle=this._element.querySelector(".card__title"),this._numLikes=this._element.querySelector(".card__calc"),this._numLikes.textContent=this._likes.length,this._elementImg.src=this._link,this._elementImg.alt=this._name,this._elementTitle.textContent=this._name,this._likes.some((function(e){return e._id===t._userId}))&&(this._elementLike.classList.add("card__like_active"),this._isLiked=!0),this._userId!==this._ownerId&&this._elementTrash.remove(),this._setEventListeners(),this._element}},{key:"_setEventListeners",value:function(){var t=this;this._elementTrash.addEventListener("click",(function(){t._handleDeleteCard(t)})),this._elementLike.addEventListener("click",(function(){t._handleClickLike(t)})),this._elementImg.addEventListener("click",(function(){t._openPopupImage(t._name,t._link)}))}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===c(e)?e:String(e)}var l=function(){function t(e){var n,r,o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=function(t){"Escape"===t.key&&i.close()},(r=s(r="_handleEscClose"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._popup=document.querySelector(e),this._closeButton=this._popup.querySelector(".popup__close")}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var t=this;this._closeButton.addEventListener("click",(function(){return t.close()})),this._popup.addEventListener("click",(function(e){e.target===t._popup&&t.close()}))}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===f(o)?o:String(o)),r)}var o}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},y.apply(this,arguments)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(r);if(o){var n=d(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n,r=e.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleFormSubmit=r,n._popupForm=n._popup.querySelector(".popup__form"),n._inputList=n._popup.querySelectorAll(".popup__input"),n._saveButton=n._popupForm.querySelector(".popup__button"),n}return e=u,(n=[{key:"_getInputValues",value:function(){var t=this;return this._formValues={},this._inputList.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}},{key:"close",value:function(){y(d(u.prototype),"close",this).call(this),this._popupForm.reset()}},{key:"changeButtonText",value:function(t){this._saveButton.textContent=t}},{key:"setEventListeners",value:function(){var t=this;y(d(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues())}))}}])&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(l);function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===v(o)?o:String(o)),r)}var o}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},b.apply(this,arguments)}function S(t,e){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S(t,e)}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=g(r);if(o){var n=g(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupImage=e._popup.querySelector(".popup__image"),e._popupCaption=e._popup.querySelector(".popup__caption"),e}return e=u,(n=[{key:"open",value:function(t,e){b(g(u.prototype),"open",this).call(this),this._popupImage.src=e,this._popupImage.alt=t,this._popupCaption.textContent=t}}])&&_(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(l);function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}var j=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._containerSelector=n}var e,n;return e=t,(n=[{key:"renderElements",value:function(t){var e=this;t.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(t){this._containerSelector.prepend(t)}}])&&E(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==O(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===O(o)?o:String(o)),r)}var o}var P=function(){function t(e){var n=e.name,r=e.profession,o=e.avatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=n,this.profession=r,this.avatar=o}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this.name.innerText,about:this.profession.innerText}}},{key:"setUserAvatar",value:function(t){this.avatar.src=t.avatar}},{key:"setUserInfo",value:function(t){this.name.textContent=t.name,this.profession.textContent=t.about,this.avatar.src=t.avatar}}])&&L(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==C(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===C(o)?o:String(o)),r)}var o}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},I.apply(this,arguments)}function B(t,e){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},B(t,e)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=R(r);if(o){var n=R(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._form=n._popup.querySelector(".popup__form"),n._button=n._popup.querySelector(".popup__button"),n._handleDeleteSubmit=e,n}return e=u,(n=[{key:"changeButtonText",value:function(t){this._button.textContent=t}},{key:"open",value:function(t,e){I(R(u.prototype),"open",this).call(this),this._card=t,this._cardId=e}},{key:"setEventListeners",value:function(){var t=this;I(R(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleDeleteSubmit(t._card,t._cardId)}))}}])&&T(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(l),x=document.querySelector(".profile__edit"),A=document.querySelector(".profile__add"),V=document.querySelector(".profile__name"),D=document.querySelector(".profile__description"),U=document.querySelector(".profile__image"),F=(document.querySelector(".popup__button"),document.querySelector(".profile__overlay")),H=document.querySelector(".popup__form_edit"),N=document.querySelector(".popup__form_add"),J=document.querySelector(".popup__form_avatar"),M=document.querySelector(".popup__input_type_name"),z=document.querySelector(".popup__input_type_profession"),$=document.querySelector(".elements");function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==G(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===G(o)?o:String(o)),r)}var o}var Q=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e.url,this._headers=e.headers}var e,n;return e=t,(n=[{key:"_checkResponse",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getUserInfo",value:function(){var t=this;return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"setUserInfo",value:function(t){var e=this;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.profession})}).then((function(t){return e._checkResponse(t)}))}},{key:"getInitialCards",value:function(){var t=this;return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"putLike",value:function(t){var e=this;return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"deleteLike",value:function(t){var e=this;return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"putAvatar",value:function(t){var e=this;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((function(t){return e._checkResponse(t)}))}},{key:"addCard",value:function(t){var e=this;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link})}).then((function(t){return e._checkResponse(t)}))}},{key:"deleteCard",value:function(t){var e=this;return fetch("".concat(this._url,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then((function(t){return e._checkResponse(t)}))}}])&&K(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var X=new r(n,H),Y=new r(n,N),Z=new r(n,J);X.enableValidation(),Y.enableValidation(),Z.enableValidation();var tt,et=new Q({url:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"cee86c57-0fcf-455b-abc1-56f9213fa44c","Content-Type":"application/json"}});Promise.all([et.getUserInfo(),et.getInitialCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,c=[],a=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{if(!a&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw o}}return c}}(e,n)||function(t,e){if(t){if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];ot.setUserInfo(o),ot.setUserAvatar(o),tt=o._id,rt.renderElements(i)})).catch((function(t){return console.log(t)}));var nt=new q(".popup_type_sure",(function(t){nt.changeButtonText("Удаление..."),et.deleteCard(t._cardId).then((function(e){t.removeCard(e),nt.close()})).catch((function(t){console.log(t)})).finally((function(){nt.changeButtonText("Удалить")}))}));nt.setEventListeners();var rt=new j({renderer:function(t){rt.addItem(st(t))}},$),ot=new P({name:V,profession:D,avatar:U}),it=new k(".popup_type_pic");it.setEventListeners();var ut=new m(".popup_type_add",{handleFormSubmit:function(t){ut.changeButtonText("Сохранение..."),et.addCard(t).then((function(t){rt.addItem(st(t)),ut.close()})).catch((function(t){console.log(t)})).finally((function(){ut.changeButtonText("Создать")}))}});ut.setEventListeners();var ct=new m(".popup_type_edit",{handleFormSubmit:function(t){ct.changeButtonText("Сохранение..."),et.setUserInfo(t).then((function(t){ot.setUserInfo(t),ct.close()})).catch((function(t){console.log(t)})).finally((function(){return ct.changeButtonText("Сохранить")}))}});ct.setEventListeners();var at=new m(".popup_type_avatar",{handleFormSubmit:function(t){at.changeButtonText("Сохранение..."),et.putAvatar(t.avatar).then((function(t){ot.setUserAvatar(t),at.close()})).catch((function(t){console.log(t)})).finally((function(){return at.changeButtonText("Сохранить")}))}});function st(t){return new u(t,"#card-template",lt,ft,pt,tt).generateCard()}function lt(t,e){it.open(t,e)}function ft(t,e){nt.open(t,e)}function pt(t){t.isCardLiked?et.deleteLike(t._cardId).then((function(e){t.setLikes(e.likes),t.toggleIsLiked()})).catch((function(t){console.log(t)})):et.putLike(t._cardId).then((function(e){t.setLikes(e.likes),t.toggleIsLiked()})).catch((function(t){console.log(t)}))}at.setEventListeners(),x.addEventListener("click",(function(){ct.open(),ct.changeButtonText("Сохранить"),X.disableSubmitButton(),X.resetValidation();var t=ot.getUserInfo(),e=t.name,n=t.about;M.value=e,z.value=n})),A.addEventListener("click",(function(){ut.open(),ut.changeButtonText("Создать"),Y.resetValidation(),Y.disableSubmitButton()})),F.addEventListener("click",(function(){at.open(),Z.resetValidation(),at.changeButtonText("Сохранить")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTL0UsR0FBZ0I4RSxHQUNuQkEsRUFBS3dFLFlBQ1BqQyxHQUFJa0MsV0FBV3pFLEVBQUtuRSxTQUNqQitGLE1BQUssU0FBQ1AsR0FDTHJCLEVBQUswRSxTQUFTckQsRUFBSXRGLE9BQ2xCaUUsRUFBSzJFLGVBQ1AsSUFDQ3pCLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsRUFDZCxJQUVGWixHQUFJcUMsUUFBUTVFLEVBQUtuRSxTQUNkK0YsTUFBSyxTQUFDUCxHQUNMckIsRUFBSzBFLFNBQVNyRCxFQUFJdEYsT0FDbEJpRSxFQUFLMkUsZUFDUCxJQUNDekIsT0FBTSxTQUFBQyxHQUNMQyxRQUFRQyxJQUFJRixFQUNkLEdBRU4sQ0E3RUVnQixHQUFnQlIsb0JBS2xCeEQsRUFBMkIxRixpQkFBaUIsU0FBUyxXQUNuRHlKLEdBQWlCSyxPQUNqQkwsR0FBaUJYLGlCQUFpQixhQUNsQ3BCLEVBQW9CMEMsc0JBQ3BCMUMsRUFBb0IyQyxrQkFDcEIsTUFBc0JqQyxHQUFTSCxjQUF4QnJILEVBQUksRUFBSkEsS0FBTW9FLEVBQUssRUFBTEEsTUFDYm1CLEVBQWV2QyxNQUFRaEQsRUFDdkJ3RixFQUFjeEMsTUFBUW9CLENBQ3hCLElBS0FXLEVBQXVCM0YsaUJBQWlCLFNBQVMsV0FDL0NzSixHQUFjUSxPQUNkUixHQUFjUixpQkFBaUIsV0FDL0JuQixFQUFtQjBDLGtCQUNuQjFDLEVBQW1CeUMscUJBQ3JCLElBS0FyRSxFQUFjL0YsaUJBQWlCLFNBQVMsV0FDdEMwSixHQUFnQkksT0FDaEJsQyxFQUFzQnlDLGtCQUV0QlgsR0FBZ0JaLGlCQUFpQixZQUVuQyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2FwaVNldHRpbmdzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uX2Rpc2FibGVkJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19lcnJvcl92aXNpYmxlJyxcclxuICBlcnJvckNsYXNzSGlkZGVuOiAncG9wdXBfX2Vycm9yJyxcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuY29uc3RydWN0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAvKiDQn9CV0KDQldCc0JXQndCd0KvQlSovXHJcbiAgdGhpcy5fdmFsaWRhdGlvbkNvbmZpZyA9IHZhbGlkYXRpb25Db25maWc7XHJcbiAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB0aGlzLl9mb3JtU2VsZWN0b3IgPSB2YWxpZGF0aW9uQ29uZmlnLmZvcm1TZWxlY3RvcjtcclxuICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gdmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHZhbGlkYXRpb25Db25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gIHRoaXMuX2Vycm9yQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgdGhpcy5fZXJyb3JDbGFzc0hpZGRlbiA9IHZhbGlkYXRpb25Db25maWcuZXJyb3JDbGFzc0hpZGRlbjtcclxuICAvKiDQnNCQ0KHQodCY0JIg0JLQodCV0KUg0JjQndCf0KPQotCe0JIgKi9cclxuICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xyXG4gIC8qINCa0J3QntCf0JrQkCDQodCQ0JHQnNCY0KLQkCAqL1xyXG4gIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxufVxyXG5cclxuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkgeyBcclxuICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3NIaWRkZW4pO1xyXG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG59XHJcblxyXG5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG5cclxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzSGlkZGVuKTtcclxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnICc7XHJcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxufVxyXG5cclxuXHJcbl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgfVxyXG59XHJcblxyXG5faGFzSW52YWxpZElucHV0KCkge1xyXG4gIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKVxyXG59XHJcblxyXG5fdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5fc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIH0pXHJcbiAgfSlcclxufVxyXG5cclxucmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG59XHJcblxyXG5kaXNhYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbn07XHJcblxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgdGVtcGxhdGVTZWxlY3Rvciwgb3BlblBvcHVwSW1hZ2UsIGhhbmRsZUNhcmREZWxldGUsIGhhbmRsZUNsaWNrTGlrZSwgdXNlcklkKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lOyBcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjsgXHJcblxyXG4gICAgXHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XHJcbiAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLl9pZDtcclxuXHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5faGFuZGxlQ2xpY2tMaWtlID0gaGFuZGxlQ2xpY2tMaWtlO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZUNhcmREZWxldGU7XHJcbiAgICB0aGlzLl9vcGVuUG9wdXBJbWFnZSA9IG9wZW5Qb3B1cEltYWdlO1xyXG4gIH1cclxuICBcclxuICBfY3JlYXRlVGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxyXG4gICAgLmNvbnRlbnQgIFxyXG4gICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJylcclxuICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZXQgaXNDYXJkTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNMaWtlZDtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUlzTGlrZWQoKSB7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gIXRoaXMuX2lzTGlrZWQ7XHJcbiAgfVxyXG5cclxuICBzZXRMaWtlcyhuZXdMaWtlcykge1xyXG4gICAgdGhpcy5fbGlrZXMgPSBuZXdMaWtlcztcclxuICAgIHRoaXMuX251bUxpa2VzLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgdGhpcy5fZWxlbWVudExpa2UuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9fbGlrZV9hY3RpdmUnKVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCAoKSB7ICBcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9jcmVhdGVUZW1wbGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnRMaWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZScpO1xyXG4gICAgdGhpcy5fZWxlbWVudFRyYXNoID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdHJhc2gnKTtcclxuICAgIHRoaXMuX2VsZW1lbnRJbWcgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpOyBcclxuICAgIHRoaXMuX2VsZW1lbnRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RpdGxlJyk7XHJcbiAgICB0aGlzLl9udW1MaWtlcyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2NhbGMnKTtcclxuXHJcbiAgICB0aGlzLl9udW1MaWtlcy50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDsgXHJcblxyXG4gICAgdGhpcy5fZWxlbWVudEltZy5zcmMgPSB0aGlzLl9saW5rOyAgXHJcbiAgICB0aGlzLl9lbGVtZW50SW1nLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9lbGVtZW50VGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgXHJcbiAgICBpZiAodGhpcy5fbGlrZXMuc29tZShsaWtlID0+IGxpa2UuX2lkID09PSB0aGlzLl91c2VySWQpKSB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnRMaWtlLmNsYXNzTGlzdC5hZGQoJ2NhcmRfX2xpa2VfYWN0aXZlJyk7XHJcbiAgICAgIHRoaXMuX2lzTGlrZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgaWYgKHRoaXMuX3VzZXJJZCAhPT0gdGhpcy5fb3duZXJJZCkge1xyXG4gICAgICB0aGlzLl9lbGVtZW50VHJhc2gucmVtb3ZlKClcclxuICAgIH1cclxuICAgICBcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgIFxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7IFxyXG4gIH0gIFxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50VHJhc2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7ICBcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCh0aGlzKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50TGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2xpY2tMaWtlKHRoaXMpICBcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5fZWxlbWVudEltZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5fb3BlblBvcHVwSW1hZ2UodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgICB9KVxyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UnKVxyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpXHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpXHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpXHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICAgIFxyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0ID09PSB0aGlzLl9wb3B1cCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCB7IGhhbmRsZUZvcm1TdWJtaXQgfSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xyXG4gICAgdGhpcy5fc2F2ZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpXHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7IC8v0YTRg9C90LrRhtC40Y8g0LLQvtC30LLRgNCw0YnQsNC10YIg0L7QsdGK0LXQutGCIF9mb3JtVmFsdWVzXHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7IC8vINCy0YvQt9GL0LLQsNC10YLRgdGPINC80LXRgtC+0LQg0LjQtyDRgNC+0LTQuNGC0LXQu9GM0YHQutC+0LPQviDQutC70LDRgdGB0LBcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlQnV0dG9uVGV4dCh0ZXh0KSB7XHJcbiAgICB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKSAvLyDQstGL0LfRi9Cy0LDQtdGC0YHRjyDQvNC10YLQvtC0INC40Lcg0YDQvtC00LjRgtC10LvRjNGB0LrQvtCz0L4g0LrQu9Cw0YHRgdCwXHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4geyAvLyDQstC10YjQsNGO0YLRgdGPINC+0LHRgNCw0LHQvtGC0YfQuNC60LhcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKSAvLyDQsNGA0LPRg9C80LXQvdGC0L7QvCDQv9GA0LjQvdC40LzQsNC10YLRgdGPINC+0LHRitC10LrRgiDQuNC3IF9nZXRJbnB1dFZhbHVlc1xyXG4gICAgfSk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJylcclxuICAgIHRoaXMuX3BvcHVwQ2FwdGlvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2FwdGlvbicpXHJcbiAgfVxyXG5cclxuICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgIHN1cGVyLm9wZW4oKTsgLy8g0LLRi9C30YvQstCw0LXRgtGB0Y8g0LzQtdGC0L7QtCDQuNC3INGA0L7QtNC40YLQtdC70YzRgdC60L7Qs9C+INC60LvQsNGB0YHQsFxyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuXHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7IC8vINC60L7Qu9Cx0LXQuiDQvtGC0YDQuNGB0L7QstC60Lgg0LrQsNGA0YLQvtGH0LXQulxyXG4gICAgICB0aGlzLl9jb250YWluZXJTZWxlY3RvciA9IGNvbnRhaW5lclNlbGVjdG9yOyAvLyDQodC10LvQtdC60YLQvtGAINC60L7QvdGC0LXQudC90LXRgNCwINC60LDRgNGC0L7Rh9C10LpcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJFbGVtZW50cyhlbGVtZW50KSB7XHJcbiAgICAgIGVsZW1lbnQuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgICB0aGlzLl9jb250YWluZXJTZWxlY3Rvci5wcmVwZW5kKGl0ZW0pXHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3Ioe25hbWUsIHByb2Zlc3Npb24sIGF2YXRhcn0pIHtcclxuICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLnByb2Zlc3Npb24gPSBwcm9mZXNzaW9uO1xyXG4gICAgdGhpcy5hdmF0YXIgPSBhdmF0YXI7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHByb2ZpbGVEYXRhID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLm5hbWUuaW5uZXJUZXh0LFxyXG4gICAgICBhYm91dDogdGhpcy5wcm9mZXNzaW9uLmlubmVyVGV4dCxcclxuICAgIH1cclxuICAgIHJldHVybiBwcm9maWxlRGF0YTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIoZGF0YSkge1xyXG4gICAgdGhpcy5hdmF0YXIuc3JjID0gZGF0YS5hdmF0YXJcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHByb2ZpbGVEYXRhKSB7XHJcbiAgICB0aGlzLm5hbWUudGV4dENvbnRlbnQgPSBwcm9maWxlRGF0YS5uYW1lO1xyXG4gICAgdGhpcy5wcm9mZXNzaW9uLnRleHRDb250ZW50ID0gcHJvZmlsZURhdGEuYWJvdXQ7XHJcbiAgICB0aGlzLmF2YXRhci5zcmMgPSBwcm9maWxlRGF0YS5hdmF0YXJcclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcydcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZURlbGV0ZVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlU3VibWl0ID0gaGFuZGxlRGVsZXRlU3VibWl0O1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlQnV0dG9uVGV4dCh0ZXh0KSB7XHJcbiAgICB0aGlzLl9idXR0b24udGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gIH1cclxuXHJcbiAgb3BlbihjYXJkLCBjYXJkSWQpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX2NhcmQgPSBjYXJkO1xyXG4gICAgdGhpcy5fY2FyZElkID0gY2FyZElkXHJcbiAgfVxyXG4gXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZVN1Ym1pdCh0aGlzLl9jYXJkLCB0aGlzLl9jYXJkSWQpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICB9XHJcbn0iLCIvLyDQmtCe0J3QodCi0JDQndCi0Ksg0J/QoNCe0KTQmNCb0K8gXHJcblxyXG4gIC8vINCa0L3QvtC/0LrQuCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPINC4INC00L7QsdCw0LLQu9C10L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxyXG4gZXhwb3J0IGNvbnN0IGJ1dHRvbk9wZW5Qb3B1cEVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQnKTsgLy/RgNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCDQv9GA0L7RhNC40LvRjFxyXG4gZXhwb3J0IGNvbnN0IGJ1dHRvbk9wZW5Qb3B1cEFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkJyk7IC8vINC00L7QsdCw0LLQuNGC0Ywg0LrQsNGA0YLQvtGH0LrRg1xyXG4gIFxyXG4gICAgLy8g0JjQvNGPINC4INC/0YDQvtGE0LXRgdGB0LjRj1xyXG4gZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKTsgLy8g0LjQvNGPXHJcbiBleHBvcnQgY29uc3QgcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19kZXNjcmlwdGlvbicpOyAvLyDRgNCw0LHQvtGC0LBcclxuIGV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2ltYWdlJykgLy8g0LDQstCw0YLQsNGAXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIFxyXG4gIC8v0JrQntCd0KHQotCQ0J3QotCrINCf0J7Qn9CQ0J/QntCSXHJcbiAgXHJcbiAgICAvLyDQodC10LvQtdC60YLQvtGA0Ysg0L/QvtC/0LDQv9C+0LJcclxuIC8vZXhwb3J0IGNvbnN0IHBvcHVwVHlwZUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9lZGl0Jyk7IC8vINC/0L7Qv9Cw0L8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xyXG4gLy9leHBvcnQgY29uc3QgcG9wdXBUeXBlQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfYWRkJyk7IC8vINC/0L7Qv9Cw0L8g0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxyXG4gLy9leHBvcnQgY29uc3QgcG9wdXBUeXBlUGljID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfcGljJyk7IC8vINC/0L7Qv9Cw0L8g0YEg0LrQsNGA0YLQuNC90LrQvtC5XHJcblxyXG4gICAgLy8g0JrQvdC+0L/QutCwINGB0L7RhdGA0LDQvdC10L3QuNGPXHJcblxyXG5leHBvcnQgY29uc3QgcG9wdXBTYXZlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24nKVxyXG5cclxuICAgIC8vINCa0L3QvtC/0LrQsCDQvdCwINCw0LLQsNGC0LDRgNC60LVcclxuICBcclxuIGV4cG9ydCBjb25zdCBhdmF0YXJPdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX292ZXJsYXknKVxyXG5cclxuICAgIC8vINCh0LXQu9C10LrRgtC+0YDRiyDRhNC+0YDQvCBcclxuIGV4cG9ydCBjb25zdCBwb3B1cEZvcm1FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtX2VkaXQnKTsgLy8g0YTQvtGA0LzQsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXHJcbiBleHBvcnQgY29uc3QgcG9wdXBGb3JtQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtX2FkZCcpOyAvLyDRhNC+0YDQvNCwINC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C6XHJcbiBleHBvcnQgY29uc3QgcG9wdXBGb3JtQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtX2F2YXRhcicpOyAvLyDRhNC+0YDQvNCwINGB0LzQtdC90Ysg0LDQstCw0YLQsNGA0LBcclxuICBcclxuICAgIC8vINCY0L3Qv9GD0YLRi1xyXG4gZXhwb3J0IGNvbnN0IHBvcHVwSW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX25hbWUnKTsgLy8g0LjQvdC/0YPRgiDQuNC80Y9cclxuIGV4cG9ydCBjb25zdCBwb3B1cElucHV0Sm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX3Byb2Zlc3Npb24nKTsgLy8g0LjQvdC/0YPRgiDRgNCw0LHQvtGC0LBcclxuICBcclxuICBcclxuICAvLyDQn9Cg0J7Qp9CV0JVcclxuIGV4cG9ydCBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50cycpOyAvLyDRgdC10LvQtdC60YLQvtGAINC60L7QvdGC0LXQudC90LXRgNCwINC60LDRgNGC0L7Rh9C10LpcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncykge1xyXG4gICAgdGhpcy5fdXJsID0gc2V0dGluZ3MudXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IHNldHRpbmdzLmhlYWRlcnNcclxuICB9XHJcblxyXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YClcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pLnRoZW4ocmVzID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhvYmopIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBvYmoubmFtZSxcclxuICAgICAgICBhYm91dDogb2JqLnByb2Zlc3Npb24sXHJcbiAgICAgIH0pXHJcbiAgICB9KS50aGVuKHJlcyA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pLnRoZW4ocmVzID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSlcclxuICB9XHJcblxyXG4gIHB1dExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHJlcyA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSkudGhlbihyZXMgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcclxuICB9XHJcblxyXG4gIHB1dEF2YXRhcihsaW5rKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogbGlua1xyXG4gICAgICB9KVxyXG4gICAgfSkudGhlbihyZXMgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKVxyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZChjYXJkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBjYXJkLm5hbWUsXHJcbiAgICAgICAgbGluazogY2FyZC5saW5rLFxyXG4gICAgICB9KVxyXG4gICAgfSkudGhlbihyZXMgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgLnRoZW4ocmVzID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSlcclxuICB9XHJcbn0iLCJpbXBvcnQgeyB2YWxpZGF0aW9uQ29uZmlnLCBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5pbXBvcnQgUG9wdXBDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBDb25maXJtYXRpb24uanNcIjtcclxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcblxyXG5pbXBvcnQgeyBidXR0b25PcGVuUG9wdXBFZGl0UHJvZmlsZSwgYnV0dG9uT3BlblBvcHVwQWRkQ2FyZCxcclxucHJvZmlsZU5hbWUsIHByb2ZpbGVKb2IsIHBvcHVwRm9ybUVkaXQsIHBvcHVwRm9ybUFkZCwgcG9wdXBJbnB1dE5hbWUsXHJcbnBvcHVwSW5wdXRKb2IsIGNhcmRzQ29udGFpbmVyLCBwcm9maWxlQXZhdGFyLCBhdmF0YXJPdmVybGF5LCBwb3B1cEZvcm1BdmF0YXIgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnXHJcblxyXG5pbXBvcnQgeyBhcGlTZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9hcGlTZXR0aW5ncy5qc1wiOyBcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjsgXHJcblxyXG4vLyDQpNCj0J3QmtCm0JjQntCd0JDQm1xyXG5cclxuLy8g0JLQutC7INCy0LDQu9C40LTQsNGG0LjRjlxyXG5cclxuY29uc3QgZWRpdFBvcHVwVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHBvcHVwRm9ybUVkaXQpO1xyXG5jb25zdCBhZGRQb3B1cFZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBwb3B1cEZvcm1BZGQpO1xyXG5jb25zdCBhdmF0YXJQb3B1cFZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBwb3B1cEZvcm1BdmF0YXIpO1xyXG5lZGl0UG9wdXBWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkUG9wdXBWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYXZhdGFyUG9wdXBWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vQVBJXHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaVNldHRpbmdzKVxyXG5cclxuXHJcbmxldCB1c2VySWQ7XHJcblxyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKSBcclxuICAudGhlbigoW3Byb2ZpbGVEYXRhLCBjYXJkc10pID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHByb2ZpbGVEYXRhKTtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIocHJvZmlsZURhdGEpXHJcbiAgICB1c2VySWQgPSBwcm9maWxlRGF0YS5faWRcclxuICAgIGRlZmF1bHRDYXJkU2VjdGlvbi5yZW5kZXJFbGVtZW50cyhjYXJkcylcclxuICB9KVxyXG4gIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcclxuXHJcblxyXG4gIC8vINCf0L7Qv9Cw0L8g0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XHJcblxyXG4gIGNvbnN0IHBvcHVwQ29uZmlybSA9IG5ldyBQb3B1cENvbmZpcm1hdGlvbignLnBvcHVwX3R5cGVfc3VyZScsIGhhbmRsZURlbGV0ZVN1Ym1pdClcclxuICBwb3B1cENvbmZpcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICBcclxuICBmdW5jdGlvbiBoYW5kbGVEZWxldGVTdWJtaXQoY2FyZCkge1xyXG4gICAgcG9wdXBDb25maXJtLmNoYW5nZUJ1dHRvblRleHQoJ9Cj0LTQsNC70LXQvdC40LUuLi4nKTtcclxuICAgIGFwaS5kZWxldGVDYXJkKGNhcmQuX2NhcmRJZClcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGNhcmQucmVtb3ZlQ2FyZChyZXMpXHJcbiAgICAgICAgcG9wdXBDb25maXJtLmNsb3NlKClcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHBvcHVwQ29uZmlybS5jaGFuZ2VCdXR0b25UZXh0KCfQo9C00LDQu9C40YLRjCcpO1xyXG4gICAgICB9KVxyXG4gIFxyXG4gIH1cclxuXHJcblxyXG4gIC8vINCh0L7Qt9C00LDQvdC40LUg0LrQsNGA0YLQvtGH0LXQuiDQuCDQuNGFINC00L7QsdCw0LLQu9C10L3QuNC1IFxyXG5cclxuY29uc3QgZGVmYXVsdENhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xyXG4gIHJlbmRlcmVyOiAoY2FyZCkgPT4ge1xyXG4gICAgZGVmYXVsdENhcmRTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChjYXJkKSk7XHJcbiAgfVxyXG59LCBjYXJkc0NvbnRhaW5lcilcclxuXHJcbi8vINGN0LrQt9C10LzQv9C70Y/RgCDQuNC90YTRiyDQviDRjtC30LXRgNC1XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZTogcHJvZmlsZU5hbWUsXHJcbiAgcHJvZmVzc2lvbjogcHJvZmlsZUpvYixcclxuICBhdmF0YXI6IHByb2ZpbGVBdmF0YXIsXHJcbn0pO1xyXG5cclxuXHJcbi8vINC/0L7Qv9Cw0L8g0YEg0LrQsNGA0YLQvtGH0LrQvtC5XHJcblxyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfcGljJyk7XHJcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5cclxuLy8gKERPTkUpINC/0L7Qv9Cw0L8g0YTQvtGA0LzRiyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XHJcblxyXG5jb25zdCBwb3B1cFdpdGhDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2FkZCcsXHJcbiAgeyBoYW5kbGVGb3JtU3VibWl0OiAoY2FyZEVsZW1lbnQpID0+IHtcclxuICAgIHBvcHVwV2l0aENhcmQuY2hhbmdlQnV0dG9uVGV4dCgn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nKVxyXG4gICAgYXBpLmFkZENhcmQoY2FyZEVsZW1lbnQpXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgZGVmYXVsdENhcmRTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChyZXMpKVxyXG4gICAgICAgIHBvcHVwV2l0aENhcmQuY2xvc2UoKVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwb3B1cFdpdGhDYXJkLmNoYW5nZUJ1dHRvblRleHQoJ9Ch0L7Qt9C00LDRgtGMJylcclxuICAgICAgfSlcclxuICAgIH0gXHJcbiAgfSk7XHJcblxyXG4gIHBvcHVwV2l0aENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgXHJcblxyXG5cclxuLy8gKERPTkUpINC/0L7Qv9Cw0L8g0YTQvtGA0LzRiyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXHJcblxyXG5jb25zdCBwb3B1cFdpdGhQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2VkaXQnLFxyXG4gIHsgaGFuZGxlRm9ybVN1Ym1pdDogKHByb2ZpbGVEYXRhKSA9PiB7XHJcbiAgICBwb3B1cFdpdGhQcm9maWxlLmNoYW5nZUJ1dHRvblRleHQoJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJylcclxuICAgIGFwaS5zZXRVc2VySW5mbyhwcm9maWxlRGF0YSlcclxuICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMpXHJcbiAgICAgICAgcG9wdXBXaXRoUHJvZmlsZS5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHBvcHVwV2l0aFByb2ZpbGUuY2hhbmdlQnV0dG9uVGV4dCgn0KHQvtGF0YDQsNC90LjRgtGMJykpXHJcbiAgfX0pO1xyXG5cclxuICBwb3B1cFdpdGhQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyDQn9C+0L/QsNC/INGE0L7RgNC80Ysg0YHQvNC10L3RiyDQsNCy0LDRgtCw0YDQsCBcclxuXHJcbmNvbnN0IHBvcHVwV2l0aEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9hdmF0YXInLCBcclxuICB7IGhhbmRsZUZvcm1TdWJtaXQ6IChwcm9maWxlRGF0YSkgPT4ge1xyXG4gICAgcG9wdXBXaXRoQXZhdGFyLmNoYW5nZUJ1dHRvblRleHQoJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJylcclxuICAgIGFwaS5wdXRBdmF0YXIocHJvZmlsZURhdGEuYXZhdGFyKVxyXG4gICAgICAudGhlbihyZXMgPT4geyAgXHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihyZXMpXHJcbiAgICAgICAgcG9wdXBXaXRoQXZhdGFyLmNsb3NlKCkgXHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4gcG9wdXBXaXRoQXZhdGFyLmNoYW5nZUJ1dHRvblRleHQoJ9Ch0L7RhdGA0LDQvdC40YLRjCcpKVxyXG4gIH1cclxuIH0pXHJcblxyXG4gIHBvcHVwV2l0aEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpXHJcblxyXG5cclxuLy8g0L7RgtC60YDRi9GC0Ywg0L/QvtC/0LDQvyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXHJcblxyXG5idXR0b25PcGVuUG9wdXBFZGl0UHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsgXHJcbiAgcG9wdXBXaXRoUHJvZmlsZS5vcGVuKCk7XHJcbiAgcG9wdXBXaXRoUHJvZmlsZS5jaGFuZ2VCdXR0b25UZXh0KCfQodC+0YXRgNCw0L3QuNGC0YwnKTtcclxuICBlZGl0UG9wdXBWYWxpZGF0aW9uLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICBlZGl0UG9wdXBWYWxpZGF0aW9uLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGNvbnN0IHtuYW1lLCBhYm91dH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHBvcHVwSW5wdXROYW1lLnZhbHVlID0gbmFtZTtcclxuICBwb3B1cElucHV0Sm9iLnZhbHVlID0gYWJvdXQ7XHJcbn0pO1xyXG5cclxuXHJcbi8vINC+0YLQutGA0YvRgtGMINC/0L7Qv9Cw0L8g0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxyXG5cclxuYnV0dG9uT3BlblBvcHVwQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHsgXHJcbiAgcG9wdXBXaXRoQ2FyZC5vcGVuKCk7XHJcbiAgcG9wdXBXaXRoQ2FyZC5jaGFuZ2VCdXR0b25UZXh0KCfQodC+0LfQtNCw0YLRjCcpO1xyXG4gIGFkZFBvcHVwVmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhZGRQb3B1cFZhbGlkYXRpb24uZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG59KTtcclxuXHJcblxyXG5cclxuXHJcbmF2YXRhck92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICBwb3B1cFdpdGhBdmF0YXIub3BlbigpXHJcbiAgYXZhdGFyUG9wdXBWYWxpZGF0aW9uLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIFxyXG4gIHBvcHVwV2l0aEF2YXRhci5jaGFuZ2VCdXR0b25UZXh0KCfQodC+0YXRgNCw0L3QuNGC0YwnKVxyXG5cclxufSlcclxuXHJcblxyXG4vLyDRgdC+0LfQtNCw0L3QuNC1INC60LDRgNGC0L7Rh9C60Lgg0Lgg0LXQtSDRhNGD0L3QutGG0LjQuFxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZCAoaXRlbSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLCAnI2NhcmQtdGVtcGxhdGUnLCBvcGVuUG9wdXBJbWFnZSwgIFxyXG4gIGhhbmRsZURlbGV0ZUNhcmQsIGhhbmRsZUNsaWNrTGlrZSwgdXNlcklkKTtcclxuXHJcbiAgY29uc3QgbmV3Q2FyZCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgcmV0dXJuIG5ld0NhcmQ7XHJcbn1cclxuICBcclxuZnVuY3Rpb24gb3BlblBvcHVwSW1hZ2UobmFtZSwgbGluaykge1xyXG4gIHBvcHVwV2l0aEltYWdlLm9wZW4obmFtZSwgbGluaylcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNhcmQoY2FyZCwgY2FyZElkKSB7XHJcbiAgcG9wdXBDb25maXJtLm9wZW4oY2FyZCwgY2FyZElkKVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2xpY2tMaWtlKGNhcmQpIHsgXHJcbiAgaWYgKGNhcmQuaXNDYXJkTGlrZWQpIHtcclxuICAgIGFwaS5kZWxldGVMaWtlKGNhcmQuX2NhcmRJZClcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGNhcmQuc2V0TGlrZXMocmVzLmxpa2VzKVxyXG4gICAgICAgIGNhcmQudG9nZ2xlSXNMaWtlZCgpXHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSlcclxuICB9IGVsc2Uge1xyXG4gICAgYXBpLnB1dExpa2UoY2FyZC5fY2FyZElkKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgY2FyZC5zZXRMaWtlcyhyZXMubGlrZXMpO1xyXG4gICAgICAgIGNhcmQudG9nZ2xlSXNMaWtlZCgpXHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcclxuICAgICAgfSlcclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuIiwiZXhwb3J0IGNvbnN0IGFwaVNldHRpbmdzID0ge1xyXG4gIHVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjAnLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246ICdjZWU4NmM1Ny0wZmNmLTQ1NWItYWJjMS01NmY5MjEzZmE0NGMnLFxyXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICB9XHJcbn0iXSwibmFtZXMiOlsidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiZXJyb3JDbGFzc0hpZGRlbiIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfdmFsaWRhdGlvbkNvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3NIaWRkZW4iLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYWRkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJzb21lIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiQ2FyZCIsImRhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwib3BlblBvcHVwSW1hZ2UiLCJoYW5kbGVDYXJkRGVsZXRlIiwiaGFuZGxlQ2xpY2tMaWtlIiwidXNlcklkIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfdXNlcklkIiwiX293bmVySWQiLCJvd25lciIsIl9pZCIsIl9jYXJkSWQiLCJfbGlrZXMiLCJsaWtlcyIsIl9pc0xpa2VkIiwiX2hhbmRsZUNsaWNrTGlrZSIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX29wZW5Qb3B1cEltYWdlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwibmV3TGlrZXMiLCJfbnVtTGlrZXMiLCJsZW5ndGgiLCJfZWxlbWVudExpa2UiLCJ0b2dnbGUiLCJfZWxlbWVudCIsIl9jcmVhdGVUZW1wbGF0ZSIsIl9lbGVtZW50VHJhc2giLCJfZWxlbWVudEltZyIsIl9lbGVtZW50VGl0bGUiLCJzcmMiLCJhbHQiLCJsaWtlIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJfcG9wdXAiLCJfY2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9wb3B1cEZvcm0iLCJfc2F2ZUJ1dHRvbiIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0IiwidGV4dCIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwiUG9wdXBXaXRoSW1hZ2UiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cENhcHRpb24iLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXJTZWxlY3RvciIsImVsZW1lbnQiLCJpdGVtIiwicHJlcGVuZCIsIlVzZXJJbmZvIiwicHJvZmVzc2lvbiIsImF2YXRhciIsImlubmVyVGV4dCIsImFib3V0IiwicHJvZmlsZURhdGEiLCJQb3B1cENvbmZpcm1hdGlvbiIsImhhbmRsZURlbGV0ZVN1Ym1pdCIsIl9mb3JtIiwiX2J1dHRvbiIsIl9oYW5kbGVEZWxldGVTdWJtaXQiLCJjYXJkIiwiY2FyZElkIiwiX2NhcmQiLCJidXR0b25PcGVuUG9wdXBFZGl0UHJvZmlsZSIsImJ1dHRvbk9wZW5Qb3B1cEFkZENhcmQiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVKb2IiLCJwcm9maWxlQXZhdGFyIiwiYXZhdGFyT3ZlcmxheSIsInBvcHVwRm9ybUVkaXQiLCJwb3B1cEZvcm1BZGQiLCJwb3B1cEZvcm1BdmF0YXIiLCJwb3B1cElucHV0TmFtZSIsInBvcHVwSW5wdXRKb2IiLCJjYXJkc0NvbnRhaW5lciIsIkFwaSIsInNldHRpbmdzIiwiX3VybCIsInVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsInRoZW4iLCJfY2hlY2tSZXNwb25zZSIsIm9iaiIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZWRpdFBvcHVwVmFsaWRhdGlvbiIsImFkZFBvcHVwVmFsaWRhdGlvbiIsImF2YXRhclBvcHVwVmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiYWxsIiwiZ2V0VXNlckluZm8iLCJnZXRJbml0aWFsQ2FyZHMiLCJjYXJkcyIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJzZXRVc2VyQXZhdGFyIiwiZGVmYXVsdENhcmRTZWN0aW9uIiwicmVuZGVyRWxlbWVudHMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJwb3B1cENvbmZpcm0iLCJjaGFuZ2VCdXR0b25UZXh0IiwiZGVsZXRlQ2FyZCIsInJlbW92ZUNhcmQiLCJmaW5hbGx5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRJdGVtIiwiY3JlYXRlQ2FyZCIsInBvcHVwV2l0aEltYWdlIiwicG9wdXBXaXRoQ2FyZCIsImNhcmRFbGVtZW50IiwiYWRkQ2FyZCIsInBvcHVwV2l0aFByb2ZpbGUiLCJwb3B1cFdpdGhBdmF0YXIiLCJwdXRBdmF0YXIiLCJoYW5kbGVEZWxldGVDYXJkIiwiZ2VuZXJhdGVDYXJkIiwib3BlbiIsImlzQ2FyZExpa2VkIiwiZGVsZXRlTGlrZSIsInNldExpa2VzIiwidG9nZ2xlSXNMaWtlZCIsInB1dExpa2UiLCJkaXNhYmxlU3VibWl0QnV0dG9uIiwicmVzZXRWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==