(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible",errorClassHidden:"popup__error"},r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._validationConfig=e,this._formElement=n,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._errorClassHidden=e.errorClassHidden,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var n,r;return n=t,(r=[{key:"_showInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));e.classList.remove(this._errorClassHidden),e.classList.add(this._errorClass),e.textContent=t.validationMessage,t.classList.add(this._inputErrorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));e.classList.add(this._errorClassHidden),e.classList.remove(this._errorClass),e.textContent=" ",t.classList.remove(this._inputErrorClass)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.remove(this._submitButtonSelector),this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.add(this._submitButtonSelector),this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"disableSubmitButton",value:function(){this._toggleButtonState()}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}var u=function(){function t(e,n,r,o,i,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._templateSelector=n,this._userId=u,this._ownerId=e.owner._id,this._cardId=e._id,this._likes=e.likes,this._isLiked=!1,this._handleClickLike=i,this._handleDeleteCard=o,this._openPopupImage=r}var e,n;return e=t,(n=[{key:"_createTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}},{key:"isCardLiked",get:function(){return this._isLiked}},{key:"toggleIsLiked",value:function(){this._isLiked=!this._isLiked}},{key:"setLikes",value:function(t){this._likes=t,this._numLikes.textContent=this._likes.length,this._elementLike.classList.toggle("card__like_active")}},{key:"removeCard",value:function(){this._element.remove(),this._element=null}},{key:"generateCard",value:function(){var t=this;return this._element=this._createTemplate(),this._elementLike=this._element.querySelector(".card__like"),this._elementTrash=this._element.querySelector(".card__trash"),this._elementImg=this._element.querySelector(".card__image"),this._elementTitle=this._element.querySelector(".card__title"),this._numLikes=this._element.querySelector(".card__calc"),this._numLikes.textContent=this._likes.length,console.log(this._likes),this._elementImg.src=this._link,this._elementImg.alt=this._name,this._elementTitle.textContent=this._name,this._likes.some((function(e){return e._id===t._userId}))&&(this._elementLike.classList.add("card__like_active"),this._isLiked=!0),this._userId!==this._ownerId&&this._elementTrash.remove(),this._setEventListeners(),this._element}},{key:"_setEventListeners",value:function(){var t=this;this._elementTrash.addEventListener("click",(function(){t._handleDeleteCard(t)})),this._elementLike.addEventListener("click",(function(){t._handleClickLike(t)})),this._elementImg.addEventListener("click",(function(){t._openPopupImage(t._name,t._link)}))}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function l(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===c(e)?e:String(e)}var s=function(){function t(e){var n,r,o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=function(t){"Escape"===t.key&&i.close()},(r=l(r="_handleEscClose"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._popup=document.querySelector(e),this._closeButton=this._popup.querySelector(".popup__close")}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var t=this;this._closeButton.addEventListener("click",(function(){return t.close()})),this._popup.addEventListener("click",(function(e){e.target===t._popup&&t.close()}))}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===f(o)?o:String(o)),r)}var o}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},y.apply(this,arguments)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=m(r);if(o){var n=m(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n,r=e.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleFormSubmit=r,n._popupForm=n._popup.querySelector(".popup__form"),n._inputList=n._popup.querySelectorAll(".popup__input"),n._saveButton=n._popupForm.querySelector(".popup__button"),n}return e=u,(n=[{key:"_getInputValues",value:function(){var t=this;return this._formValues={},this._inputList.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}},{key:"close",value:function(){y(m(u.prototype),"close",this).call(this),this._popupForm.reset()}},{key:"changeButtonText",value:function(t){this._saveButton.textContent=t}},{key:"setEventListeners",value:function(){var t=this;y(m(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues())}))}}])&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(s);function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===v(o)?o:String(o)),r)}var o}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},b.apply(this,arguments)}function S(t,e){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S(t,e)}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=g(r);if(o){var n=g(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._popupImage=e._popup.querySelector(".popup__image"),e._popupCaption=e._popup.querySelector(".popup__caption"),e}return e=u,(n=[{key:"open",value:function(t,e){b(g(u.prototype),"open",this).call(this),this._popupImage.src=e,this._popupImage.alt=t,this._popupCaption.textContent=t}}])&&_(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(s);function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}var j=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._containerSelector=n}var e,n;return e=t,(n=[{key:"renderElements",value:function(t){var e=this;t.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(t){this._containerSelector.prepend(t)}}])&&E(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==O(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===O(o)?o:String(o)),r)}var o}var P=function(){function t(e){var n=e.name,r=e.profession,o=e.avatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=n,this.profession=r,this.avatar=o}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this.name.innerText,about:this.profession.innerText}}},{key:"setUserAvatar",value:function(t){this.avatar.src=t.avatar}},{key:"setUserInfo",value:function(t){this.name.textContent=t.name,this.profession.textContent=t.about,this.avatar.src=t.avatar}}])&&L(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==C(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===C(o)?o:String(o)),r)}var o}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},T.apply(this,arguments)}function B(t,e){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},B(t,e)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=R(r);if(o){var n=R(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._form=n._popup.querySelector(".popup__form"),n._button=n._popup.querySelector(".popup__button"),n._handleDeleteSubmit=e,n}return e=u,(n=[{key:"changeButtonText",value:function(t){this._button.textContent=t}},{key:"open",value:function(t,e){T(R(u.prototype),"open",this).call(this),this._card=t,this._cardId=e}},{key:"setEventListeners",value:function(){var t=this;T(R(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleDeleteSubmit(t._card,t._cardId),T(R(u.prototype),"close",t).call(t)}))}}])&&I(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(s),x=document.querySelector(".profile__edit"),A=document.querySelector(".profile__add"),D=document.querySelector(".profile__name"),U=document.querySelector(".profile__description"),V=document.querySelector(".profile__image"),F=(document.querySelector(".popup__button"),document.querySelector(".profile__overlay")),H=document.querySelector(".popup__form_edit"),N=document.querySelector(".popup__form_add"),J=document.querySelector(".popup__form_avatar"),M=document.querySelector(".popup__input_type_name"),z=document.querySelector(".popup__input_type_profession"),$=document.querySelector(".elements");function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==G(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===G(o)?o:String(o)),r)}var o}var Q=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e.url,this._headers=e.headers}var e,n;return e=t,(n=[{key:"_checkResponse",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getUserInfo",value:function(){var t=this;return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"setUserInfo",value:function(t){var e=this;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.profession})}).then((function(t){return e._checkResponse(t)}))}},{key:"getInitialCards",value:function(){var t=this;return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"putLike",value:function(t){var e=this;return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"deleteLike",value:function(t){var e=this;return fetch("".concat(this._url,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"putAvatar",value:function(t){var e=this;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((function(t){return e._checkResponse(t)}))}},{key:"addCard",value:function(t){var e=this;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link})}).then((function(t){return e._checkResponse(t)}))}},{key:"deleteCard",value:function(t){var e=this;return fetch("".concat(this._url,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then((function(t){return e._checkResponse(t)}))}}])&&K(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var X=new r(n,H),Y=new r(n,N),Z=new r(n,J);X.enableValidation(),Y.enableValidation(),Z.enableValidation();var tt,et=new Q({url:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"cee86c57-0fcf-455b-abc1-56f9213fa44c","Content-Type":"application/json"}});console.log(et.getInitialCards),Promise.all([et.getUserInfo(),et.getInitialCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,c=[],a=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);a=!0);}catch(t){l=!0,o=t}finally{try{if(!a&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return c}}(e,n)||function(t,e){if(t){if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];ot.setUserInfo(o),ot.setUserAvatar(o),tt=o._id,rt.renderElements(i)})).catch((function(t){return console.log(t)}));var nt=new q(".popup_type_sure",(function(t){nt.changeButtonText("Удаление..."),et.deleteCard(t._cardId).then((function(e){t.removeCard(e)})).catch((function(t){console.log(t)})).finally((function(){nt.changeButtonText("Удалить")}))}));nt.setEventListeners();var rt=new j({renderer:function(t){rt.addItem(lt(t))}},$),ot=new P({name:D,profession:U,avatar:V}),it=new k(".popup_type_pic");it.setEventListeners();var ut=new d(".popup_type_add",{handleFormSubmit:function(t){et.addCard(t).then((function(t){rt.addItem(lt(t)),ut.close()})).catch((function(t){console.log(t)})).finally((function(){ut.changeButtonText("Сохранение...")}))}});ut.setEventListeners();var ct=new d(".popup_type_edit",{handleFormSubmit:function(t){et.setUserInfo(t).then((function(t){ot.setUserInfo(t),ct.close()})).catch((function(t){console.log(t)})).finally((function(){return ct.changeButtonText("Сохранение...")}))}});ct.setEventListeners();var at=new d(".popup_type_avatar",{handleFormSubmit:function(t){et.putAvatar(t.avatar).then((function(t){ot.setUserAvatar(t),at.close()})).catch((function(t){console.log(t)})).finally((function(){return at.changeButtonText("Сохранение...")}))}});function lt(t){return new u(t,"#card-template",st,ft,pt,tt).generateCard()}function st(t,e){it.open(t,e)}function ft(t,e){nt.open(t,e)}function pt(t){t.isCardLiked?et.deleteLike(t._cardId).then((function(e){t.setLikes(e.likes),t.toggleIsLiked()})).catch((function(t){console.log(t)})):et.putLike(t._cardId).then((function(e){t.setLikes(e.likes),t.toggleIsLiked()}))}at.setEventListeners(),x.addEventListener("click",(function(){ct.open(),ct.changeButtonText("Сохранить"),X.disableSubmitButton();var t=ot.getUserInfo(),e=t.name,n=t.about;M.value=e,z.value=n})),A.addEventListener("click",(function(){ut.open(),ut.changeButtonText("Создать"),Y.disableSubmitButton()})),F.addEventListener("click",(function(){at.open(),at.changeButtonText("Сохранить"),Z.disableSubmitButton()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FDbEJtRSxFQUFLeUUsZUFDUCxJQUNDdkIsT0FBTSxTQUFDQyxHQUNOcEcsUUFBUUMsSUFBSW1HLEVBQ2QsSUFFRlosR0FBSW1DLFFBQVExRSxFQUFLckUsU0FDZGlHLE1BQUssU0FBQ1AsR0FDTHJCLEVBQUt3RSxTQUFTbkQsRUFBSXhGLE9BQ2xCbUUsRUFBS3lFLGVBQ1AsR0FFTixDQXBFRVIsR0FBZ0JSLG9CQUtsQnRELEVBQTJCNUYsaUJBQWlCLFNBQVMsV0FDbkR5SixHQUFpQkssT0FDakJMLEdBQWlCWCxpQkFBaUIsYUFDbENsQixFQUFvQndDLHNCQUNwQixNQUFzQjlCLEdBQVNGLGNBQXhCeEgsRUFBSSxFQUFKQSxLQUFNc0UsRUFBSyxFQUFMQSxNQUNibUIsRUFBZXZDLE1BQVFsRCxFQUN2QjBGLEVBQWN4QyxNQUFRb0IsQ0FDeEIsSUFLQVcsRUFBdUI3RixpQkFBaUIsU0FBUyxXQUMvQ3NKLEdBQWNRLE9BQ2RSLEdBQWNSLGlCQUFpQixXQUMvQmpCLEVBQW1CdUMscUJBQ3JCLElBR0FuRSxFQUFjakcsaUJBQWlCLFNBQVMsV0FDdEMwSixHQUFnQkksT0FDaEJKLEdBQWdCWixpQkFBaUIsYUFDakNoQixFQUFzQnNDLHFCQUN4QixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2FwaVNldHRpbmdzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uX2Rpc2FibGVkJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19lcnJvcl92aXNpYmxlJyxcclxuICBlcnJvckNsYXNzSGlkZGVuOiAncG9wdXBfX2Vycm9yJyxcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuY29uc3RydWN0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAvKiDQn9CV0KDQldCc0JXQndCd0KvQlSovXHJcbiAgdGhpcy5fdmFsaWRhdGlvbkNvbmZpZyA9IHZhbGlkYXRpb25Db25maWc7XHJcbiAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB0aGlzLl9mb3JtU2VsZWN0b3IgPSB2YWxpZGF0aW9uQ29uZmlnLmZvcm1TZWxlY3RvcjtcclxuICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gdmFsaWRhdGlvbkNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gdmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHZhbGlkYXRpb25Db25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gIHRoaXMuX2Vycm9yQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgdGhpcy5fZXJyb3JDbGFzc0hpZGRlbiA9IHZhbGlkYXRpb25Db25maWcuZXJyb3JDbGFzc0hpZGRlbjtcclxuICAvKiDQnNCQ0KHQodCY0JIg0JLQodCV0KUg0JjQndCf0KPQotCe0JIgKi9cclxuICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xyXG4gIC8qINCa0J3QntCf0JrQkCDQodCQ0JHQnNCY0KLQkCAqL1xyXG4gIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxufVxyXG5cclxuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkgeyBcclxuICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3NIaWRkZW4pO1xyXG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG59XHJcblxyXG5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG5cclxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzSGlkZGVuKTtcclxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnICc7XHJcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxufVxyXG5cclxuXHJcbl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgfVxyXG59XHJcblxyXG5faGFzSW52YWxpZElucHV0KCkge1xyXG4gIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKVxyXG59XHJcblxyXG5fdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5fc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIH0pXHJcbiAgfSlcclxufVxyXG5cclxuZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbn1cclxuXHJcbmRpc2FibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxufTtcclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCB0ZW1wbGF0ZVNlbGVjdG9yLCBvcGVuUG9wdXBJbWFnZSwgaGFuZGxlQ2FyZERlbGV0ZSwgaGFuZGxlQ2xpY2tMaWtlLCB1c2VySWQpIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7IFxyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yOyBcclxuXHJcbiAgICBcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xyXG5cclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLl9oYW5kbGVDbGlja0xpa2UgPSBoYW5kbGVDbGlja0xpa2U7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkID0gaGFuZGxlQ2FyZERlbGV0ZTtcclxuICAgIHRoaXMuX29wZW5Qb3B1cEltYWdlID0gb3BlblBvcHVwSW1hZ2U7XHJcbiAgfVxyXG4gIFxyXG4gIF9jcmVhdGVUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXHJcbiAgICAuY29udGVudCAgXHJcbiAgICAucXVlcnlTZWxlY3RvcignLmNhcmQnKVxyXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGdldCBpc0NhcmRMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0xpa2VkO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlSXNMaWtlZCgpIHtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSAhdGhpcy5faXNMaWtlZDtcclxuICB9XHJcblxyXG4gIHNldExpa2VzKG5ld0xpa2VzKSB7XHJcbiAgICB0aGlzLl9saWtlcyA9IG5ld0xpa2VzO1xyXG4gICAgdGhpcy5fbnVtTGlrZXMudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICB0aGlzLl9lbGVtZW50TGlrZS5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlX2FjdGl2ZScpXHJcbiAgfVxyXG5cclxuICByZW1vdmVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkICgpIHsgIFxyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2NyZWF0ZVRlbXBsYXRlKCk7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudExpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlJyk7XHJcbiAgICB0aGlzLl9lbGVtZW50VHJhc2ggPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190cmFzaCcpO1xyXG4gICAgdGhpcy5fZWxlbWVudEltZyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJyk7IFxyXG4gICAgdGhpcy5fZWxlbWVudFRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKTtcclxuICAgIHRoaXMuX251bUxpa2VzID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fY2FsYycpO1xyXG5cclxuICAgIHRoaXMuX251bUxpa2VzLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKHRoaXMuX2xpa2VzKSBcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50SW1nLnNyYyA9IHRoaXMuX2xpbms7ICBcclxuICAgIHRoaXMuX2VsZW1lbnRJbWcuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2VsZW1lbnRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICBcclxuICAgIGlmICh0aGlzLl9saWtlcy5zb21lKGxpa2UgPT4gbGlrZS5faWQgPT09IHRoaXMuX3VzZXJJZCkpIHtcclxuICAgICAgdGhpcy5fZWxlbWVudExpa2UuY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZV9hY3RpdmUnKTtcclxuICAgICAgdGhpcy5faXNMaWtlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBpZiAodGhpcy5fdXNlcklkICE9PSB0aGlzLl9vd25lcklkKSB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnRUcmFzaC5yZW1vdmUoKVxyXG4gICAgfVxyXG4gICAgIFxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDsgXHJcbiAgfSAgXHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnRUcmFzaC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsgIFxyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKHRoaXMpXHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMuX2VsZW1lbnRMaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDbGlja0xpa2UodGhpcykgIFxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50SW1nLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9vcGVuUG9wdXBJbWFnZSh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgIH0pXHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZScpXHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJylcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJylcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgXHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQgPT09IHRoaXMuX3BvcHVwKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHsgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0Jyk7XHJcbiAgICB0aGlzLl9zYXZlQnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uJylcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHsgLy/RhNGD0L3QutGG0LjRjyDQstC+0LfQstGA0LDRidCw0LXRgiDQvtCx0YrQtdC60YIgX2Zvcm1WYWx1ZXNcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTsgLy8g0LLRi9C30YvQstCw0LXRgtGB0Y8g0LzQtdGC0L7QtCDQuNC3INGA0L7QtNC40YLQtdC70YzRgdC60L7Qs9C+INC60LvQsNGB0YHQsFxyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VCdXR0b25UZXh0KHRleHQpIHtcclxuICAgIHRoaXMuX3NhdmVCdXR0b24udGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpIC8vINCy0YvQt9GL0LLQsNC10YLRgdGPINC80LXRgtC+0LQg0LjQtyDRgNC+0LTQuNGC0LXQu9GM0YHQutC+0LPQviDQutC70LDRgdGB0LBcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7IC8vINCy0LXRiNCw0Y7RgtGB0Y8g0L7QsdGA0LDQsdC+0YLRh9C40LrQuFxyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpIC8vINCw0YDQs9GD0LzQtdC90YLQvtC8INC/0YDQuNC90LjQvNCw0LXRgtGB0Y8g0L7QsdGK0LXQutGCINC40LcgX2dldElucHV0VmFsdWVzXHJcbiAgICB9KTtcclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcydcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKVxyXG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jYXB0aW9uJylcclxuICB9XHJcblxyXG4gIG9wZW4obmFtZSwgbGluaykge1xyXG4gICAgc3VwZXIub3BlbigpOyAvLyDQstGL0LfRi9Cy0LDQtdGC0YHRjyDQvNC10YLQvtC0INC40Lcg0YDQvtC00LjRgtC10LvRjNGB0LrQvtCz0L4g0LrQu9Cw0YHRgdCwXHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wb3B1cENhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG5cclxuICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjsgLy8g0LrQvtC70LHQtdC6INC+0YLRgNC40YHQvtCy0LrQuCDQutCw0YDRgtC+0YfQtdC6XHJcbiAgICAgIHRoaXMuX2NvbnRhaW5lclNlbGVjdG9yID0gY29udGFpbmVyU2VsZWN0b3I7IC8vINCh0LXQu9C10LrRgtC+0YAg0LrQvtC90YLQtdC50L3QtdGA0LAg0LrQsNGA0YLQvtGH0LXQulxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckVsZW1lbnRzKGVsZW1lbnQpIHtcclxuICAgICAgZWxlbWVudC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRhaW5lclNlbGVjdG9yLnByZXBlbmQoaXRlbSlcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7bmFtZSwgcHJvZmVzc2lvbiwgYXZhdGFyfSkge1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIHRoaXMucHJvZmVzc2lvbiA9IHByb2Zlc3Npb247XHJcbiAgICB0aGlzLmF2YXRhciA9IGF2YXRhcjtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgcHJvZmlsZURhdGEgPSB7XHJcbiAgICAgIG5hbWU6IHRoaXMubmFtZS5pbm5lclRleHQsXHJcbiAgICAgIGFib3V0OiB0aGlzLnByb2Zlc3Npb24uaW5uZXJUZXh0LFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByb2ZpbGVEYXRhO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckF2YXRhcihkYXRhKSB7XHJcbiAgICB0aGlzLmF2YXRhci5zcmMgPSBkYXRhLmF2YXRhclxyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8ocHJvZmlsZURhdGEpIHtcclxuICAgIHRoaXMubmFtZS50ZXh0Q29udGVudCA9IHByb2ZpbGVEYXRhLm5hbWU7XHJcbiAgICB0aGlzLnByb2Zlc3Npb24udGV4dENvbnRlbnQgPSBwcm9maWxlRGF0YS5hYm91dDtcclxuICAgIHRoaXMuYXZhdGFyLnNyYyA9IHByb2ZpbGVEYXRhLmF2YXRhclxyXG4gIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRGVsZXRlU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uJyk7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVTdWJtaXQgPSBoYW5kbGVEZWxldGVTdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VCdXR0b25UZXh0KHRleHQpIHtcclxuICAgIHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgfVxyXG5cclxuICBvcGVuKGNhcmQsIGNhcmRJZCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fY2FyZCA9IGNhcmQ7XHJcbiAgICB0aGlzLl9jYXJkSWQgPSBjYXJkSWRcclxuICB9XHJcbiBcclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlU3VibWl0KHRoaXMuX2NhcmQsIHRoaXMuX2NhcmRJZCk7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgfVxyXG59IiwiLy8g0JrQntCd0KHQotCQ0J3QotCrINCf0KDQntCk0JjQm9CvIFxyXG5cclxuICAvLyDQmtC90L7Qv9C60Lgg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRjyDQuCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LhcclxuIGV4cG9ydCBjb25zdCBidXR0b25PcGVuUG9wdXBFZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0Jyk7IC8v0YDQtdC00LDQutGC0LjRgNC+0LLQsNGC0Ywg0L/RgNC+0YTQuNC70YxcclxuIGV4cG9ydCBjb25zdCBidXR0b25PcGVuUG9wdXBBZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZCcpOyAvLyDQtNC+0LHQsNCy0LjRgtGMINC60LDRgNGC0L7Rh9C60YNcclxuICBcclxuICAgIC8vINCY0LzRjyDQuCDQv9GA0L7RhNC10YHRgdC40Y9cclxuIGV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7IC8vINC40LzRj1xyXG4gZXhwb3J0IGNvbnN0IHByb2ZpbGVKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZGVzY3JpcHRpb24nKTsgLy8g0YDQsNCx0L7RgtCwXHJcbiBleHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbWFnZScpIC8vINCw0LLQsNGC0LDRgFxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBcclxuICAvL9Ca0J7QndCh0KLQkNCd0KLQqyDQn9Ce0J/QkNCf0J7QklxyXG4gIFxyXG4gICAgLy8g0KHQtdC70LXQutGC0L7RgNGLINC/0L7Qv9Cw0L/QvtCyXHJcbiAvL2V4cG9ydCBjb25zdCBwb3B1cFR5cGVFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfZWRpdCcpOyAvLyDQv9C+0L/QsNC/INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y9cclxuIC8vZXhwb3J0IGNvbnN0IHBvcHVwVHlwZUFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2FkZCcpOyAvLyDQv9C+0L/QsNC/INC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcclxuIC8vZXhwb3J0IGNvbnN0IHBvcHVwVHlwZVBpYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX3BpYycpOyAvLyDQv9C+0L/QsNC/INGBINC60LDRgNGC0LjQvdC60L7QuVxyXG5cclxuICAgIC8vINCa0L3QvtC/0LrQsCDRgdC+0YXRgNCw0L3QtdC90LjRj1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwU2F2ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uJylcclxuXHJcbiAgICAvLyDQmtC90L7Qv9C60LAg0L3QsCDQsNCy0LDRgtCw0YDQutC1XHJcbiAgXHJcbiBleHBvcnQgY29uc3QgYXZhdGFyT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19vdmVybGF5JylcclxuXHJcbiAgICAvLyDQodC10LvQtdC60YLQvtGA0Ysg0YTQvtGA0LwgXHJcbiBleHBvcnQgY29uc3QgcG9wdXBGb3JtRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybV9lZGl0Jyk7IC8vINGE0L7RgNC80LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xyXG4gZXhwb3J0IGNvbnN0IHBvcHVwRm9ybUFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybV9hZGQnKTsgLy8g0YTQvtGA0LzQsCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQulxyXG4gZXhwb3J0IGNvbnN0IHBvcHVwRm9ybUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybV9hdmF0YXInKTsgLy8g0YTQvtGA0LzQsCDRgdC80LXQvdGLINCw0LLQsNGC0LDRgNCwXHJcbiAgXHJcbiAgICAvLyDQmNC90L/Rg9GC0YtcclxuIGV4cG9ydCBjb25zdCBwb3B1cElucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9uYW1lJyk7IC8vINC40L3Qv9GD0YIg0LjQvNGPXHJcbiBleHBvcnQgY29uc3QgcG9wdXBJbnB1dEpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9wcm9mZXNzaW9uJyk7IC8vINC40L3Qv9GD0YIg0YDQsNCx0L7RgtCwXHJcbiAgXHJcbiAgXHJcbiAgLy8g0J/QoNCe0KfQldCVXHJcbiBleHBvcnQgY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHMnKTsgLy8g0YHQtdC70LXQutGC0L7RgCDQutC+0L3RgtC10LnQvdC10YDQsCDQutCw0YDRgtC+0YfQtdC6XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MpIHtcclxuICAgIHRoaXMuX3VybCA9IHNldHRpbmdzLnVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBzZXR0aW5ncy5oZWFkZXJzXHJcbiAgfVxyXG5cclxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApXHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KS50aGVuKHJlcyA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8ob2JqKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogb2JqLm5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IG9iai5wcm9mZXNzaW9uLFxyXG4gICAgICB9KVxyXG4gICAgfSkudGhlbihyZXMgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KS50aGVuKHJlcyA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpXHJcbiAgfVxyXG5cclxuICBwdXRMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbihyZXMgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUxpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pLnRoZW4ocmVzID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XHJcbiAgfVxyXG5cclxuICBwdXRBdmF0YXIobGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGxpbmtcclxuICAgICAgfSlcclxuICAgIH0pLnRoZW4ocmVzID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSlcclxuICB9XHJcblxyXG4gIGFkZENhcmQoY2FyZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogY2FyZC5uYW1lLFxyXG4gICAgICAgIGxpbms6IGNhcmQubGluayxcclxuICAgICAgfSlcclxuICAgIH0pLnRoZW4ocmVzID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpXHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgdmFsaWRhdGlvbkNvbmZpZywgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IFBvcHVwQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwQ29uZmlybWF0aW9uLmpzXCI7XHJcbmltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5cclxuaW1wb3J0IHsgYnV0dG9uT3BlblBvcHVwRWRpdFByb2ZpbGUsIGJ1dHRvbk9wZW5Qb3B1cEFkZENhcmQsXHJcbnByb2ZpbGVOYW1lLCBwcm9maWxlSm9iLCBwb3B1cEZvcm1FZGl0LCBwb3B1cEZvcm1BZGQsIHBvcHVwSW5wdXROYW1lLFxyXG5wb3B1cElucHV0Sm9iLCBjYXJkc0NvbnRhaW5lciwgcHJvZmlsZUF2YXRhciwgYXZhdGFyT3ZlcmxheSwgcG9wdXBGb3JtQXZhdGFyIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJ1xyXG5cclxuaW1wb3J0IHsgYXBpU2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvYXBpU2V0dGluZ3MuanNcIjsgXHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7IFxyXG5cclxuLy8g0KTQo9Cd0JrQptCY0J7QndCQ0JtcclxuXHJcbi8vINCS0LrQuyDQstCw0LvQuNC00LDRhtC40Y5cclxuXHJcbmNvbnN0IGVkaXRQb3B1cFZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBwb3B1cEZvcm1FZGl0KTtcclxuY29uc3QgYWRkUG9wdXBWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgcG9wdXBGb3JtQWRkKTtcclxuY29uc3QgYXZhdGFyUG9wdXBWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgcG9wdXBGb3JtQXZhdGFyKTtcclxuZWRpdFBvcHVwVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmFkZFBvcHVwVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmF2YXRhclBvcHVwVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vL0FQSVxyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaShhcGlTZXR0aW5ncylcclxuXHJcbmNvbnNvbGUubG9nKGFwaS5nZXRJbml0aWFsQ2FyZHMpXHJcblxyXG5sZXQgdXNlcklkO1xyXG5cclxuXHJcblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSkgXHJcbiAgLnRoZW4oKFtwcm9maWxlRGF0YSwgY2FyZHNdKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhwcm9maWxlRGF0YSk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHByb2ZpbGVEYXRhKVxyXG4gICAgdXNlcklkID0gcHJvZmlsZURhdGEuX2lkXHJcbiAgICBkZWZhdWx0Q2FyZFNlY3Rpb24ucmVuZGVyRWxlbWVudHMoY2FyZHMpXHJcbiAgfSlcclxuICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXHJcblxyXG5cclxuICAvLyDQn9C+0L/QsNC/INGD0LTQsNC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxyXG5cclxuICBjb25zdCBwb3B1cENvbmZpcm0gPSBuZXcgUG9wdXBDb25maXJtYXRpb24oJy5wb3B1cF90eXBlX3N1cmUnLCBoYW5kbGVEZWxldGVTdWJtaXQpXHJcbiAgcG9wdXBDb25maXJtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgXHJcbiAgZnVuY3Rpb24gaGFuZGxlRGVsZXRlU3VibWl0KGNhcmQpIHtcclxuICAgIHBvcHVwQ29uZmlybS5jaGFuZ2VCdXR0b25UZXh0KCfQo9C00LDQu9C10L3QuNC1Li4uJyk7XHJcbiAgICBhcGkuZGVsZXRlQ2FyZChjYXJkLl9jYXJkSWQpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjYXJkLnJlbW92ZUNhcmQocmVzKVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBDb25maXJtLmNoYW5nZUJ1dHRvblRleHQoJ9Cj0LTQsNC70LjRgtGMJyk7XHJcbiAgICAgIH0pXHJcbiAgXHJcbiAgfVxyXG5cclxuXHJcbiAgLy8g0KHQvtC30LTQsNC90LjQtSDQutCw0YDRgtC+0YfQtdC6INC4INC40YUg0LTQvtCx0LDQstC70LXQvdC40LUgXHJcblxyXG5jb25zdCBkZWZhdWx0Q2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbih7XHJcbiAgcmVuZGVyZXI6IChjYXJkKSA9PiB7XHJcbiAgICBkZWZhdWx0Q2FyZFNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKGNhcmQpKTtcclxuICB9XHJcbn0sIGNhcmRzQ29udGFpbmVyKVxyXG5cclxuLy8g0Y3QutC30LXQvNC/0LvRj9GAINC40L3RhNGLINC+INGO0LfQtdGA0LVcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lOiBwcm9maWxlTmFtZSxcclxuICBwcm9mZXNzaW9uOiBwcm9maWxlSm9iLFxyXG4gIGF2YXRhcjogcHJvZmlsZUF2YXRhcixcclxufSk7XHJcblxyXG5cclxuLy8g0L/QvtC/0LDQvyDRgSDQutCw0YDRgtC+0YfQutC+0LlcclxuXHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfdHlwZV9waWMnKTtcclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyAoRE9ORSkg0L/QvtC/0LDQvyDRhNC+0YDQvNGLINC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcclxuXHJcbmNvbnN0IHBvcHVwV2l0aENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfYWRkJyxcclxuICB7IGhhbmRsZUZvcm1TdWJtaXQ6IChjYXJkRWxlbWVudCkgPT4ge1xyXG5cclxuICAgIGFwaS5hZGRDYXJkKGNhcmRFbGVtZW50KVxyXG4gICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgIGRlZmF1bHRDYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQocmVzKSlcclxuICAgICAgICBwb3B1cFdpdGhDYXJkLmNsb3NlKClcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBXaXRoQ2FyZC5jaGFuZ2VCdXR0b25UZXh0KCfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicpXHJcbiAgICAgIH0pXHJcbiAgICB9IFxyXG4gIH0pO1xyXG5cclxuICBwb3B1cFdpdGhDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7IFxyXG5cclxuXHJcbi8vIChET05FKSDQv9C+0L/QsNC/INGE0L7RgNC80Ysg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xyXG5cclxuY29uc3QgcG9wdXBXaXRoUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9lZGl0JyxcclxuICB7IGhhbmRsZUZvcm1TdWJtaXQ6IChwcm9maWxlRGF0YSkgPT4ge1xyXG5cclxuICAgIGFwaS5zZXRVc2VySW5mbyhwcm9maWxlRGF0YSlcclxuICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMpXHJcbiAgICAgICAgcG9wdXBXaXRoUHJvZmlsZS5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHBvcHVwV2l0aFByb2ZpbGUuY2hhbmdlQnV0dG9uVGV4dCgn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nKSlcclxuICB9fSk7XHJcblxyXG4gIHBvcHVwV2l0aFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vINCf0L7Qv9Cw0L8g0YTQvtGA0LzRiyDRgdC80LXQvdGLINCw0LLQsNGC0LDRgNCwIFxyXG5cclxuY29uc3QgcG9wdXBXaXRoQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2F2YXRhcicsIFxyXG4gIHsgaGFuZGxlRm9ybVN1Ym1pdDogKHByb2ZpbGVEYXRhKSA9PiB7XHJcbiAgICBhcGkucHV0QXZhdGFyKHByb2ZpbGVEYXRhLmF2YXRhcilcclxuICAgICAgLnRoZW4ocmVzID0+IHsgIFxyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIocmVzKVxyXG4gICAgICAgIHBvcHVwV2l0aEF2YXRhci5jbG9zZSgpIFxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHBvcHVwV2l0aEF2YXRhci5jaGFuZ2VCdXR0b25UZXh0KCfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicpKVxyXG4gIH1cclxuIH0pXHJcblxyXG4gIHBvcHVwV2l0aEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpXHJcblxyXG5cclxuLy8g0L7RgtC60YDRi9GC0Ywg0L/QvtC/0LDQvyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXHJcblxyXG5idXR0b25PcGVuUG9wdXBFZGl0UHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsgXHJcbiAgcG9wdXBXaXRoUHJvZmlsZS5vcGVuKCk7XHJcbiAgcG9wdXBXaXRoUHJvZmlsZS5jaGFuZ2VCdXR0b25UZXh0KCfQodC+0YXRgNCw0L3QuNGC0YwnKTtcclxuICBlZGl0UG9wdXBWYWxpZGF0aW9uLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICBjb25zdCB7bmFtZSwgYWJvdXR9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwb3B1cElucHV0TmFtZS52YWx1ZSA9IG5hbWU7XHJcbiAgcG9wdXBJbnB1dEpvYi52YWx1ZSA9IGFib3V0O1xyXG59KTtcclxuXHJcblxyXG4vLyDQvtGC0LrRgNGL0YLRjCDQv9C+0L/QsNC/INC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcclxuXHJcbmJ1dHRvbk9wZW5Qb3B1cEFkZENhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7IFxyXG4gIHBvcHVwV2l0aENhcmQub3BlbigpO1xyXG4gIHBvcHVwV2l0aENhcmQuY2hhbmdlQnV0dG9uVGV4dCgn0KHQvtC30LTQsNGC0YwnKTtcclxuICBhZGRQb3B1cFZhbGlkYXRpb24uZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG59KTtcclxuXHJcbiBcclxuYXZhdGFyT3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gIHBvcHVwV2l0aEF2YXRhci5vcGVuKClcclxuICBwb3B1cFdpdGhBdmF0YXIuY2hhbmdlQnV0dG9uVGV4dCgn0KHQvtGF0YDQsNC90LjRgtGMJylcclxuICBhdmF0YXJQb3B1cFZhbGlkYXRpb24uZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG59KVxyXG5cclxuXHJcbi8vINGB0L7Qt9C00LDQvdC40LUg0LrQsNGA0YLQvtGH0LrQuCDQuCDQtdC1INGE0YPQvdC60YbQuNC4XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkIChpdGVtKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0sICcjY2FyZC10ZW1wbGF0ZScsIG9wZW5Qb3B1cEltYWdlLCAgXHJcbiAgaGFuZGxlRGVsZXRlQ2FyZCwgaGFuZGxlQ2xpY2tMaWtlLCB1c2VySWQpO1xyXG5cclxuICBjb25zdCBuZXdDYXJkID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICByZXR1cm4gbmV3Q2FyZDtcclxufVxyXG4gIFxyXG5mdW5jdGlvbiBvcGVuUG9wdXBJbWFnZShuYW1lLCBsaW5rKSB7XHJcbiAgcG9wdXBXaXRoSW1hZ2Uub3BlbihuYW1lLCBsaW5rKVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2FyZChjYXJkLCBjYXJkSWQpIHtcclxuICBwb3B1cENvbmZpcm0ub3BlbihjYXJkLCBjYXJkSWQpXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDbGlja0xpa2UoY2FyZCkgeyBcclxuICBpZiAoY2FyZC5pc0NhcmRMaWtlZCkge1xyXG4gICAgYXBpLmRlbGV0ZUxpa2UoY2FyZC5fY2FyZElkKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgY2FyZC5zZXRMaWtlcyhyZXMubGlrZXMpXHJcbiAgICAgICAgY2FyZC50b2dnbGVJc0xpa2VkKClcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KVxyXG4gIH0gZWxzZSB7XHJcbiAgICBhcGkucHV0TGlrZShjYXJkLl9jYXJkSWQpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjYXJkLnNldExpa2VzKHJlcy5saWtlcyk7XHJcbiAgICAgICAgY2FyZC50b2dnbGVJc0xpa2VkKClcclxuICAgICAgfSlcclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuIiwiZXhwb3J0IGNvbnN0IGFwaVNldHRpbmdzID0ge1xyXG4gIHVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjAnLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246ICdjZWU4NmM1Ny0wZmNmLTQ1NWItYWJjMS01NmY5MjEzZmE0NGMnLFxyXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICB9XHJcbn0iXSwibmFtZXMiOlsidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiZXJyb3JDbGFzc0hpZGRlbiIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfdmFsaWRhdGlvbkNvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3NIaWRkZW4iLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYWRkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJzb21lIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiQ2FyZCIsImRhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwib3BlblBvcHVwSW1hZ2UiLCJoYW5kbGVDYXJkRGVsZXRlIiwiaGFuZGxlQ2xpY2tMaWtlIiwidXNlcklkIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfdXNlcklkIiwiX293bmVySWQiLCJvd25lciIsIl9pZCIsIl9jYXJkSWQiLCJfbGlrZXMiLCJsaWtlcyIsIl9pc0xpa2VkIiwiX2hhbmRsZUNsaWNrTGlrZSIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX29wZW5Qb3B1cEltYWdlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwibmV3TGlrZXMiLCJfbnVtTGlrZXMiLCJsZW5ndGgiLCJfZWxlbWVudExpa2UiLCJ0b2dnbGUiLCJfZWxlbWVudCIsIl9jcmVhdGVUZW1wbGF0ZSIsIl9lbGVtZW50VHJhc2giLCJfZWxlbWVudEltZyIsIl9lbGVtZW50VGl0bGUiLCJjb25zb2xlIiwibG9nIiwic3JjIiwiYWx0IiwibGlrZSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImV2dCIsImtleSIsImNsb3NlIiwiX3BvcHVwIiwiX2Nsb3NlQnV0dG9uIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXBGb3JtIiwiX3NhdmVCdXR0b24iLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsInRleHQiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aEltYWdlIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBDYXB0aW9uIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyU2VsZWN0b3IiLCJlbGVtZW50IiwiaXRlbSIsInByZXBlbmQiLCJVc2VySW5mbyIsInByb2Zlc3Npb24iLCJhdmF0YXIiLCJpbm5lclRleHQiLCJhYm91dCIsInByb2ZpbGVEYXRhIiwiUG9wdXBDb25maXJtYXRpb24iLCJoYW5kbGVEZWxldGVTdWJtaXQiLCJfZm9ybSIsIl9idXR0b24iLCJfaGFuZGxlRGVsZXRlU3VibWl0IiwiY2FyZCIsImNhcmRJZCIsIl9jYXJkIiwiYnV0dG9uT3BlblBvcHVwRWRpdFByb2ZpbGUiLCJidXR0b25PcGVuUG9wdXBBZGRDYXJkIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlSm9iIiwicHJvZmlsZUF2YXRhciIsImF2YXRhck92ZXJsYXkiLCJwb3B1cEZvcm1FZGl0IiwicG9wdXBGb3JtQWRkIiwicG9wdXBGb3JtQXZhdGFyIiwicG9wdXBJbnB1dE5hbWUiLCJwb3B1cElucHV0Sm9iIiwiY2FyZHNDb250YWluZXIiLCJBcGkiLCJzZXR0aW5ncyIsIl91cmwiLCJ1cmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJ0aGVuIiwiX2NoZWNrUmVzcG9uc2UiLCJvYmoiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImVkaXRQb3B1cFZhbGlkYXRpb24iLCJhZGRQb3B1cFZhbGlkYXRpb24iLCJhdmF0YXJQb3B1cFZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImdldEluaXRpYWxDYXJkcyIsImFsbCIsImdldFVzZXJJbmZvIiwiY2FyZHMiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsImRlZmF1bHRDYXJkU2VjdGlvbiIsInJlbmRlckVsZW1lbnRzIiwiY2F0Y2giLCJlcnIiLCJwb3B1cENvbmZpcm0iLCJjaGFuZ2VCdXR0b25UZXh0IiwiZGVsZXRlQ2FyZCIsInJlbW92ZUNhcmQiLCJmaW5hbGx5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRJdGVtIiwiY3JlYXRlQ2FyZCIsInBvcHVwV2l0aEltYWdlIiwicG9wdXBXaXRoQ2FyZCIsImNhcmRFbGVtZW50IiwiYWRkQ2FyZCIsInBvcHVwV2l0aFByb2ZpbGUiLCJwb3B1cFdpdGhBdmF0YXIiLCJwdXRBdmF0YXIiLCJoYW5kbGVEZWxldGVDYXJkIiwiZ2VuZXJhdGVDYXJkIiwib3BlbiIsImlzQ2FyZExpa2VkIiwiZGVsZXRlTGlrZSIsInNldExpa2VzIiwidG9nZ2xlSXNMaWtlZCIsInB1dExpa2UiLCJkaXNhYmxlU3VibWl0QnV0dG9uIl0sInNvdXJjZVJvb3QiOiIifQ==